<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel Admin - PagosBot PRO</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/admin.css">
</head>
<body>
    <nav class="navbar">
        <div class="container" style="display: flex; justify-content: space-between; align-items: center;">
            <h1 class="logo">⚙️ Panel Admin</h1>
            <button onclick="logout()" style="background: #dc2626; color: white; padding: 0.5rem 1.5rem; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">
                🚪 Cerrar Sesión
            </button>
        </div>
    </nav>

    <div class="admin-container">
        <div class="admin-header">
            <a href="index.html" class="back-link">← Volver al sitio</a>
            <h1 style="margin: 1rem 0 0.5rem 0;">Panel de Administración</h1>
            <p style="margin: 0; opacity: 0.9;">Configura los webhooks y API keys de PagosBot PRO</p>
        </div>

        <!-- Webhook Make.com -->
        <div class="config-section">
            <h3>🔗 Webhook de Make.com</h3>
            
            <div id="webhookStatus" class="status-badge status-not-configured">
                ⚠️ Webhook no configurado
            </div>

            <div class="form-group" style="margin-top: 1.5rem;">
                <label for="webhookUrl">URL del Webhook:</label>
                <input 
                    type="url" 
                    id="webhookUrl" 
                    placeholder="https://hook.us2.make.com/..."
                >
            </div>

            <div class="info-box">
                <strong>ℹ️ Qué hace:</strong><br>
                Captura los datos de compra y los envía automáticamente a Make.com para procesar el pedido.
            </div>

            <button class="btn-save" onclick="saveWebhook()">💾 Guardar Webhook</button>
        </div>

        <!-- Gemini API -->
        <div class="config-section">
            <h3>🤖 API de Gemini (Opcional)</h3>
            
            <div id="geminiStatus" class="status-badge status-not-configured">
                ⚠️ API no configurada
            </div>

            <div class="form-group" style="margin-top: 1.5rem;">
                <label for="geminiApiKey">API Key de Google Gemini:</label>
                <input 
                    type="text" 
                    id="geminiApiKey" 
                    placeholder="AIza..."
                >
            </div>

            <div class="info-box">
                <strong>ℹ️ Para activar IA:</strong><br>
                1. Ve a <a href="https://makersuite.google.com/app/apikey" target="_blank">Google AI Studio</a><br>
                2. Crea una API Key gratuita<br>
                3. Pégala aquí
            </div>

            <button class="btn-save" onclick="saveGeminiApi()">💾 Guardar API Key</button>
        </div>

        <!-- Link de Prueba -->
        <div class="config-section">
            <h3>🧪 Link de Prueba de Wompi</h3>
            
            <div class="form-group">
                <input 
                    type="url" 
                    id="wompiTestLink" 
                    value="https://checkout.wompi.co/l/test_VPOS_7OpYwZ"
                    readonly
                    style="background: #f3f4f6;"
                >
            </div>

            <button class="btn-save" onclick="testWompiPayment()">🧪 Probar Pago</button>
        </div>

        <!-- Estado -->
        <div class="config-section">
            <h3>📊 Estado del Sistema</h3>
            
            <div style="display: grid; gap: 1rem;">
                <div style="padding: 1rem; background: #f9fafb; border-radius: 8px;">
                    <strong>🔒 Autenticación:</strong>
                    <span style="color: #059669; margin-left: 1rem;">✅ Activa</span>
                </div>
                
                <div style="padding: 1rem; background: #f9fafb; border-radius: 8px;">
                    <strong>💰 Links de Wompi:</strong>
                    <span style="color: #059669; margin-left: 1rem;">✅ Configurados</span>
                </div>
            </div>
        </div>
    </div>

    <footer style="margin-top: 5rem;">
        <div class="container">
            <div class="footer-bottom">
                <p>&copy; 2025 PagosBot PRO - Variedades JyM</p>
            </div>
        </div>
    </footer>

    <script src="js/admin.js"></script>
</body>
</html>